<html>
<head>
  <title>js講座テキスト 19/05/25</title>
  <style>
    body{
        margin-left:20%;
        margin-right:20%;    
    }

    p{
        margin:0px;
    }

    div.container{
        margin-left:10%;
        margin-right:10%;    
    }

    div.container01{
        margin:0%;
    }

    .arrange{
        float: left;
        width:30%;
        text-align: center;
    }
    .arrange > img{
        width:30%;
    }
    div{
        width:100%;
    }

    .attentionWord{
        /* font-size: 300%; */
        font-weight: bold;
        text-align: center;
    }

    hr{
        margin-top:200px;
        margin-bottom:30px;    
        clear:both;
    }

    pre{
        margin:0px;
    }

    .obj{
        padding-bottom:100px;
    }

    .copy{
        text-align: center;
        background-color: #77e;
        border:groove 3px #000;
    }

    .challenge{
        text-align: center;
        background-color: #77e;
        border:groove 3px #000;
    }
    .select{
      border: dashed 2px #000;
    }
    .ans{
      border: double 5px #aaa;
    }

    .blind{
       display:none;
        /* visibility:hidden; */
    }

    .prettyprint{
      background-color: #ffd;
      padding: 2px; 
      border: 1px solid #888;
    }

  </style>

  <script src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js"></script>
</head>
<body>

    <h2>htmlファイルを作ろう</h2>
    <div class="obj">
      ※index.htmlという名前で保存
      <pre class="prettyprint" id="src0"> 
          &lt;html&gt; 
          &lt;body&gt;
            &lt;h1&gt; id="title" タイトル&lt;/h1&gt;
          &lt;/body&gt;
          &lt;script &gt; 
            console.dir("test");
          &lt;/script&gt; 
        &lt;/html&gt; 
  
      </pre>
      <p class="copy" id="copy0">選択</p>
    </div>

    <div class="obj">
      <h2>JSファイルの分離</h2>
      main.jsファイルを作成しましょう
      <pre class="prettyprint" id="src1">
      &lt;html&gt; 
        &lt;body&gt;
          &lt;h1&gt;タイトル&lt;/h1&gt;
        &lt;/body&gt;
        &lt;script src="main.js" &gt; &lt;/script&gt; 
      &lt;/html&gt; 
      </pre>
      <p class="copy" id="copy1">選択</p>
      <br>
     </div>

    <div class="obj">
      独立したmain.jsファイル
      <pre class="prettyprint" id="src2">
        console.log("test");
      </pre>
      <p class="copy" id="copy2">選択</p>
      <br>
    </div>



  <h2>画面に出力しよう</h2>
  <div class="obj">
      画面情報を取得する。<br />
      ※main.jsを変更<br />      
    <pre class="prettyprint" id="src15"> 
          console.dir(document);
    </pre>
    <p class="copy" id="copy15">選択</p>
  </div>


  <div class="obj">
      画面情報の一部を取得する。<br />    
      ※main.jsを変更<br />    
    <pre class="prettyprint" id="src16">
          var a = document.getElementById('title'); 
          console.dir(a);
    </pre>
    <p class="copy" id="copy16">選択</p>    
    ※タグにIDを追加すること<br />
    ※h1タグの文字情報の場所を確認すること<br />
  </div>


  <div class="obj">
    【問題】id以外を使って画面情報の一部を取得する。<br />
    ①index.htmlとmain.jsに分けて保存する。<br />
    ②consoleの後ろのコメントに書かれている文字を画面から取得し表示する<br />
    ③コメントを外し、チャレンジ問題に挑戦
    <p class="challenge" id="qb18" onClick="dispQ('#qb18','#q18');">問題を表示</p>
    <span class="blind" id="q18">  
    <pre class="prettyprint" id="src160">
    &lt;html&gt; 
      &lt;body&gt;
        &lt;h1  id="title1"&gt;タイトル1&lt;/h1&gt;
        &lt;h2 class="title2"&gt;タイトル2&lt;/h2&gt;
        &lt;h2 id="title3" &gt;タイトル3&lt;/h2&gt;
        &lt;h2 class="title4" &gt;タイトル3&lt;/h2&gt;
        &lt;h3 &gt;タイトル5&lt;/h3&gt;
        &lt;h4 &gt;タイトル6&lt;/h4&gt;
      &lt;/body&gt;
      &lt;script&gt;
        //getElementByIdでIDを指定して取得
        var title1 = document.getElementById('title1'); 
        console.dir(title1);//タイトル1

        //getElementsByClassNameでclassを指定して取得
        var title2 = document.getElementsByClassName('title2'); 
        console.dir(title2);//タイトル2

        //getElementsByIdでidを指定して取得
        [処理]
        console.dir(title3);//タイトル3

        //チャレンジ！getElementsByClassでclassを指定して取得
        //[処理]
        //console.dir(title4);//タイトル4

        //getElementsByTagNameでタグ名を指定して取得
        //var title4 = document.getElementsByTagName('h3'); 
        //console.dir(title5);//タイトル5

        //チャレンジ！getElementsByTagNameでタグ名を指定して取得
        //[処理]
        //console.dir(title6);//タイトル6       
        &lt;/script&gt; 
    &lt;/html&gt; 
    </pre>
    <p class="copy" id="copy160">選択</p>
    </span>
  </div>



  <div class="obj">
      【チャレンジ問題】CSSも外部ファイルにしてみよう<br />
      style.cssを作成してみよう。
      <p class="challenge" id="qb1_" onClick="dispQ('#qb1_','#q1_');">問題を表示</p>
      <span class="blind" id="q1_">
          <p><br />htmlファイルにはbodyタグの上に<br />
          &lt;head><br />
          &lt;link rel='stylesheet' type='text/css' href='style.css' /><br />
          &lt;/head><br />
          を追加<br /></p>
    <pre class="prettyprint" id="src1_">
        h1{
          color:red;
        }
    </pre>
    <p class="copy" id="copy1_">選択</p>
    </span>
  </div>



  <div class="obj">
    画面の情報を変更する<br />      
    <pre class="prettyprint" id="src17">
    &lt;html&gt; 
      &lt;body&gt;
        &lt;h1 id="title"&gt;タイトル&lt;/h1&gt;
      &lt;/body&gt;
      &lt;script&gt;
        var a = document.getElementById('title');
        a.innerText = "まさお";
      &lt;/script&gt; 
    &lt;/html&gt; 
    </pre>
    <p class="copy" id="copy17">選択</p>
  </div>

  <div class="obj">
    ボタンをクリックされた時のイベントを割り当てる<br />      
    <pre class="prettyprint" id="src19">
      &lt;html&gt; 
      &lt;body&gt;
        &lt;input type="text" id="tb"&gt;
        &lt;button id="bt"&gt; 押せ！&lt;/button&gt;    
      &lt;/body&gt;
        &lt;script&gt;
        function test(){
          console.dir('clickされたよ！');
        }        
        var bt = document.getElementById('bt');
        bt.addEventListener('click',test);
        &lt;/script&gt; 
      &lt;/html&gt; 
    </pre>
    <p class="copy" id="copy19">選択</p>
  </div>
  
  <div class="obj">
      テキストを取得する<br />      
    <pre class="prettyprint" id="src20">
      &lt;html&gt; 
        &lt;body&gt;
          &lt;input type="text" id="tb" value="masao"&gt;
          &lt;button id="bt"&gt;押せ！&lt;/button&gt;    
        &lt;/body&gt;
        &lt;script&gt;
        function test(){
          var tb = document.getElementById('tb');
          console.dir(tb);
        }      
        var bt = document.getElementById('bt');
        bt.addEventListener('click',test);
        &lt;/script&gt; 
      &lt;/html&gt; 
    </pre>
    <p class="copy" id="copy20">選択</p>
  </div>
  
  <div class="obj">
    取得したテキストを出力する<br />      
    <pre class="prettyprint" id="src21">
      &lt;html&gt; 
        &lt;body&gt;
        &lt;input type="text" id="tb" value="masao"&gt;
        &lt;button id="bt"&gt;押せ！&lt;/button&gt;
        &lt;p id="output"&gt;未入力&lt;/p&gt;  
        &lt;/body&gt;
        &lt;script&gt;
        function test(){
          var tb = document.getElementById('tb');
          var p = document.getElementById('output');
          p.innerText = tb.value;
        }
        var bt = document.getElementById('bt');
        bt.addEventListener('click',test);   
        &lt;/script&gt; 
      &lt;/html&gt; 
    </pre>
    <p class="copy" id="copy21">選択</p>
  </div>



  <div class="obj">
      【問題】<br />
      「→」ボタンを押したら、左textboxの値を右textboxに入れよう<br />
      <p class="challenge" id="qb18_1" onClick="dispQ('#qb18_1','#q18_1');">問題を表示</p>
      <span class="blind" id="q18_1">  
      <pre class="prettyprint" id="src160_1">
      &lt;html&gt; 
        &lt;body&gt;
          &lt;input type="text" id="text1" value="左textboxの値" &gt;
          &lt;button id="bt" &gt; → &lt;/button&gt;
          &lt;input type="text" id="text2" value="右textboxの値" &gt;

          &lt;h2 class="title2"&gt;タイトル2&lt;/h2&gt;
          &lt;h2 id="title3" &gt;タイトル3&lt;/h2&gt;
          &lt;h2 class="title4" &gt;タイトル3&lt;/h2&gt;
          &lt;h3 &gt;タイトル5&lt;/h3&gt;
          &lt;h4 &gt;タイトル6&lt;/h4&gt;
        &lt;/body&gt;
        &lt;script&gt;
       
        &lt;/script&gt; 
      &lt;/html&gt; 
      </pre>
      <p class="copy" id="copy160_1">選択</p>
      </span>
    </div>
  <hr />
  <h1>そのほか小技</h1>
  <p class="challenge" id="qbkowaza" onClick="dispQ('#qbkowaza','#qkowaza');">開く</p>
  <span class="blind" id="qkowaza"> 

    <h2>時間差で処理を実行しよう</h2>
    <div class="obj">
        時間差処理なしパターン<br />      
        <pre class="prettyprint" id="src22">
          &lt;html&gt; 
            &lt;script&gt;
            function log(){
              console.dir(2);
            }
            console.dir(1);
            log(2);
            console.dir(3);
            &lt;/script&gt; 
          &lt;/html&gt; 
        </pre>
        <p class="copy" id="copy22">選択</p>
      </div>
    
      <div class="obj">
        時間差処理ありパターン<br />      
        <pre class="prettyprint" id="src23">
          &lt;html&gt; 
            &lt;script&gt;
            function log(){
              console.log(2);
            }
            console.log(1);
            setTimeout(log,1000);
            console.log(3);
            &lt;/script&gt; 
          &lt;/html&gt; 
        </pre>
        <p class="copy" id="copy23">選択</p>
      </div>

      <h2>乱数を使う</h2>
      <div class="obj">
          乱数を表示する<br />      
        <pre class="prettyprint" id="src24">
          &lt;html&gt; 
            &lt;script&gt;
            var num = Math.random();
            console.log(num);       
            &lt;/script&gt; 
          &lt;/html&gt; 
        </pre>
        <p class="copy" id="copy24">選択</p>
      </div>

      <div class="obj">
        整数の乱数を作ろう<br />      
        <pre class="prettyprint" id="src25">
          &lt;html&gt; 
            &lt;script&gt;
            var num = Math.random();
            console.log(num);
            var num2 = Math.floor(num);
            console.log(num2);
            var num3 = Math.floor(num*10);
            console.log(num3);             
            &lt;/script&gt; 
          &lt;/html&gt; 
        </pre>
        <p class="copy" id="copy25">選択</p>
      </div>

      <div class="obj">
        整数の乱数を作る関数を作ろう<br />      
        <pre class="prettyprint" id="src26">
          &lt;html&gt; 
            &lt;script&gt;
            function ransuu(mul){
              var num = Math.random();
              var num3 = Math.floor(num*mul);
              return num3;
            }
            var ran = ransuu(100);
            console.dir(ran);                 
            &lt;/script&gt; 
          &lt;/html&gt; 
        </pre>
        <p class="copy" id="copy26">選択</p>
      </div>

    </span>

  </body>
  <script>
    function select(obj){
        var s = window.getSelection();
        s.empty();
        var range = document.createRange();
        range.selectNode(obj.querySelector('pre'));
        s.addRange(range);    
    }

    function dispQ(addSelector,removeSelector){
      document.querySelector(removeSelector).classList.remove('blind');
      document.querySelector(addSelector).classList.add('blind');
    }

    (()=>{
        let objArray = document.querySelectorAll('.obj');
        for(let obj of objArray){
          let copy = obj.querySelector('.copy');
            copy.addEventListener('click',()=>{
              console.log(copy.id);
              select(obj);
            });
        }

        let cssImage = document.querySelector('#cssImage');
        let jsImage = document.querySelector('#jsImage');

    })();
  </script>
</html>